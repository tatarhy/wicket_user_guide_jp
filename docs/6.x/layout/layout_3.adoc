
<<layout.adoc#header-footer-left-menu-content-etc,5.1節>>で上げたレイアウトのサンプルでは、レイアウトをどのページでも使用する汎用的なエリアに分けた。
さて次は,テンプレートベースのWebアプリケーションを構築するために、再利用可能なテンプレートページを作りはじめよう。新たなサンプルコードはMarkupInheritanceExampleプロジェクトにある。

=== パネルとレイアウトエリア

コンテンツエリアを除いたレイアウトエリアそれぞれをパネル化するところから始めよう。ヘッダーエリアを例とすると、

image::https://ci.apache.org/projects/wicket/guide/6.x/img/header-area.png[]

`HeaderPanel` という名前のパネルを、HeaderPanel.htmlとして以下のように作ることができる。

[source,html]
----
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
...
</head>
<body>
   <wicket:panel>
      <table width="100%" style="border: 0px none;">
      <tbody>
    <tr>
    <td>
       <img alt="Jug4Tenda" src="wicketLayout_files/logo_jug4tenda.gif">
     </td>
      <td>
    <h1>Gestione Anagrafica</h1>
   </td>   
      </tr>
      </tbody>
      </table>   
   </wicket:panel>
</body>
<html>
----

パネルのJavaクラス側では、その名の通り `Panel` クラスを継承する必要がある。

[source,java]
----
package helloWorld.layoutTenda;

import org.apache.wicket.markup.html.panel.Panel;

public class HeaderPanel extends Panel {

	public HeaderPanel(String id) {
		super(id);		
	}
}
----

レイアウトエリアひとつに対してひとつのパネルを上記のように作る。最終的には下記のパネルが出来上がるはずだ。

* HeaderPanel (ヘッダー)
* FooterPanel (フッター)
* MenuPanel (メニュー)

コンテンツエリアはページごとに異なるはずなので、パネル化する必要は無い。

=== テンプレートとなるページ

さて、たった今作ったパネル達を使ってテンプレートページを作りはじめよう。HTMLファイルは驚くほどシンプルになる。

[source,html]
----
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
...
<!--Include CSS-->
...
</head>
<body>
<div id="header" wicket:id="headerPanel">header</div>
<div id="body">
	<div id="menu" wicket:id="menuPanel">menu</div>
	<div id="content" wicket:id="contentComponent">content</div>
</div>
<div id="footer" wicket:id="footerPanel">footer</div>
</body>
</html>
----

このHTMLは、左メニューを持つ汎用的なレイアウトを提供する。対応するエリアの入れ物となっている4つの `div` タグがあることを心に留めておいて欲しい。このページのJavaクラスは、ページとパネルを結びつけるコードを含んでいる。

[source,java]
----
package helloWorld.layoutTenda;

import org.apache.wicket.markup.html.WebPage;
import org.apache.wicket.Component;
import org.apache.wicket.markup.html.basic.Label;

public class JugTemplate extends WebPage {
	public static final String CONTENT_ID = "contentComponent";

	private Component headerPanel;
	private Component menuPanel;
	private Component footerPanel;
 
              public JugTemplate(){
		add(headerPanel = new HeaderPanel("headerPanel"));
		add(menuPanel = new MenuPanel("menuPanel"));
		add(footerPanel = new FooterPanel("footerPanel"));
		add(new Label(CONTENT_ID, "Put your content here"));
	}
              
             //getters for layout areas
       //... 
}
----

さあ、これでテンプレートページを使う準備が整った！これ以降作成する全てのページをこのテンプレートページを親とするサブクラスとして作ることで、レイアウトを引き継ぐことが出来る。上記のラベルコンポーネントの部分を自由なコンテンツに置き換えさえすればいい。

=== 仕上げに

ここまでを踏まえて、ログインページ( `SimpleLoginPage` ) を作成しよう。まずはじめに、ログインフォームとなるパネル（ `LoginPanel` ）が必要だ。このパネルをコンテンツエリアに配置する。HTMLファイルは以下のようになる。

[source,html]
----
<html>
<head>
</head>
<body>
   <wicket:panel>
    <div style="margin: auto; width: 40%;">
       <form  id="loginForm" method="get">
         <fieldset id="login" class="center">
            <legend >Login</legend>               
            <span >Username: </span><input type="text" id="username"/><br/>                                                                  
            <span >Password: </span><input type="password" id="password" />
            <p>
               <input type="submit" name="login" value="login"/>
            </p>
         </fieldset>
      </form>
    </div>   
   </wicket:panel>
</body>
</html>
----

このパネルのJavaクラスは、パネルクラスを継承するだけだ。ここで作るフォームパネルはデモを目的としているため、実際には動作しないものである。Wicketにおけるフォームの使い方は<<wicket-models-and-forms,11章>>と<<wicket-forms-in-detail,12章>>で説明する。また、ログインページなので左メニューを表示する必要は無い。コンポーネントクラスには、 `setVisible` メソッドが存在し、コンポーネント自身とコンポーネントにアドされた子コンポーネントの表示・非表示を切り替える事が出来るので、難しい事ではない。

ログインページのJavaクラスは以下のようになる。

[source,java]
----
package helloWorld.layoutTenda;
import helloWorld.LoginPanel;
import org.apache.wicket.event.Broadcast;
import org.apache.wicket.event.IEventSink;

public class SimpleLoginPage extends JugTemplate {
	public SimpleLoginPage(){
		super();		
		replace(new LoginPanel(CONTENT_ID));
		getMenuPanel().setVisible(false);
	}
}
----

HTMLファイルを作成しなくても、最終的に以下のページが出来上がる。

image::https://ci.apache.org/projects/wicket/guide/6.x/img/final-login-page.png[]
